!function(t){var e={};function n(o){if(e[o])return e[o].exports;var i=e[o]={i:o,l:!1,exports:{}};return t[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(o,i,function(e){return t[e]}.bind(null,i));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=15)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Signal=void 0;var o=function(){function t(){}return t.prototype.destroy=function(){void 0!==this._listenerEntries&&(this._listenerEntries.length=0,this._listenerEntries=void 0)},t.prototype.subscribe=function(t,e){void 0===this._listenerEntries&&(this._listenerEntries=[]),this._listenerEntries.push({listener:t,callback:e})},t.prototype.unsubscribe=function(t){if(void 0!==this._listenerEntries){for(var e=this._listenerEntries.length-1;e>=0;--e)this._listenerEntries[e].listener===t&&this._listenerEntries.splice(e,1);0===this._listenerEntries.length&&(this._listenerEntries=void 0)}},t.prototype.emit=function(t){if(void 0!==this._listenerEntries)for(var e=0,n=this._listenerEntries;e<n.length;e++){n[e].callback(t)}},t}();e.Signal=o},function(t,e,n){"use strict";var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.Actor=void 0;var r=function(t){function e(e){void 0===e&&(e={});var n=t.call(this,e)||this;return n.isActive=!0,n.children={},n.controllerComponents={},n.displayComponents={},n.name=e.name,n}return i(e,t),e.prototype.load=function(){t.prototype.load.call(this);for(var e=0,n=Object.keys(this.displayComponents);e<n.length;e++){var o=n[e];this.displayComponents[o].load()}for(var i=0,r=Object.keys(this.children);i<r.length;i++){var a=r[i];this.children[a].load()}},e.prototype.addControllerComponent=function(t){return void 0===this.controllerComponents[t.name]&&(this.controllerComponents[t.name]=t,!0)},e.prototype.removeControllerComponent=function(t){return void 0!==this.controllerComponents[t.name]&&(delete this.controllerComponents[t.name],!0)},e.prototype.addDisplayComponent=function(t){return void 0===this.displayComponents[t.name]&&(this.container.addChild(t.container),this.displayComponents[t.name]=t,!0)},e.prototype.removeDisplayComponent=function(t){return void 0!==this.displayComponents[t.name]&&(this.container.removeChild(t.container),delete this.displayComponents[t.name],!0)},e.prototype.addChild=function(t){return void 0===this.children[t.name]&&(this.container.addChild(t.container),this.children[t.name]=t,!0)},e.prototype.removeChild=function(t){return void 0!==this.children[t.name]&&(this.container.removeChild(t.container),delete this.children[t.name],!0)},e.prototype.update=function(t){for(var e,n,o=0,i=Object.keys(this.controllerComponents);o<i.length;o++){var r=i[o];(e=this.controllerComponents[r]).isActive&&e.update(t)}for(var a=0,s=Object.keys(this.children);a<s.length;a++){var c=s[a];(n=this.children[c]).isActive&&n.update(t)}},e}(n(9).Renderable);e.Actor=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Engine=void 0;var o=n(16),i=n(17),r=n(8),a=function(){function t(){}return Object.defineProperty(t,"displayContainer",{get:function(){return t._displayContainer},enumerable:!1,configurable:!0}),Object.defineProperty(t,"renderer",{get:function(){return t._renderer},enumerable:!1,configurable:!0}),t.start=function(e){if(t._state!==o.EngineState.IDLE)throw new Error("Something tried to start the Engine while it was already running. This should not happen, and likely indicates a critical issue.");t._gameType=e,t._state=o.EngineState.STARTUP;var n=document.getElementById("gameContainer");if(null===n)throw new Error("Failed to retrieve element with ID gameContainer from the DOM. This is required for the engine to build itself within.");t._displayContainer=n,PIXI.Loader.shared.add([t._gameConfigPath]).load(t.onGameConfigLoaded.bind(this))},t.tick=function(){var e=(Date.now()-t._lastUpdateTime)/1e3;t._game.update(e),t._renderer.update(e),t._lastUpdateTime=Date.now(),requestAnimationFrame(t.tick)},t.onGameConfigLoaded=function(e,n){var a=n[t._gameConfigPath].data;t._gameConfig=a,t._renderer=new i.PIXIRenderer([],a.renderer),t._state=o.EngineState.LOADING,r.AssetLoader.onAssetGroupLoaded.subscribe(t,t.startGame),r.AssetLoader.loadAssets(a.assets)},t.startGame=function(){t._game=new t._gameType(t._gameConfig.gameData);for(var e=0,n=t._renderer.levels;e<n.length;e++){n[e].root.load()}t._state=o.EngineState.RUNNING,t._lastUpdateTime=Date.now(),t.tick()},t._gameConfigPath="assets/gameConfig.json",t._state=o.EngineState.IDLE,t}();e.Engine=a},function(t,e,n){"use strict";var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__assign||function(){return(r=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.AdVentureCapitalist=void 0;var a,s=n(19),c=n(20),u=n(22),l=n(27);!function(t){t.BANK="mainBank"}(a||(a={}));var p=function(t){function e(n){var o=this;if(void 0!==e._instance)throw new Error("Attempted to create an instance of the game class when one already was made");return o=t.call(this,n)||this,e._instance=o,o.createGameArea(),o}return i(e,t),e.getInstance=function(){return e._instance},Object.defineProperty(e.prototype,"bank",{get:function(){return this._gameArea.root.children[a.BANK]},enumerable:!1,configurable:!0}),e.prototype.update=function(t){},e.prototype.createGameArea=function(){var t;this._gameArea=new c.Level("GameArea",!0);var e=new l.VentureBank({name:"mainBank",baseManagerButtonData:this._gameData.baseManagerButtonData,businesses:this._gameData.businesses});this._gameArea.root.addChild(e);for(var n=null!==(t=this._gameData.baseBusinessData)&&void 0!==t?t:{},o=0;o<this._gameData.businesses.length;++o){var i=this._gameData.businesses[o],a=new u.VentureBusiness(r(r({},n),i));a.transform.position.x=450+450*Math.floor(o/5),a.transform.position.y=50+o%5*175,a.transform.scale.x=.85,a.transform.scale.y=.85,this._gameArea.root.addChild(a)}},e}(s.Game);e.AdVentureCapitalist=p},function(t,e,n){"use strict";var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.TextComponent=e.TextFormatMode=void 0;var r,a=n(11),s=n(5),c=n(0),u=n(7),l=n(10);!function(t){t.TEXT="text",t.CURRENCY="currency"}(r=e.TextFormatMode||(e.TextFormatMode={}));var p=function(t){function e(e){var n,o=t.call(this,e)||this;o.onTextChanged=new c.Signal,o._maxSize=(new l.Vector3).configure(null!==(n=e.maxSize)&&void 0!==n?n:{}),void 0===o._objectData.format&&(o._objectData.format=r.TEXT);var i=o._objectData.text instanceof s.Observable,a=i?"":String(o._objectData.text);return o._internalAssetData=new PIXI.Text("",o._objectData.style),o.setText(a),i&&o.attachTo(o._objectData.text),o}return i(e,t),e.prototype.load=function(){t.prototype.load.call(this),this.container.addChild(this._internalAssetData)},e.prototype.setText=function(t){switch(this._objectData.format){case r.CURRENCY:t=e.currencyFormatter.format(Number(t));break;default:t=String(t)}this._internalAssetData.text=String(t),void 0===this.onTextChanged&&(this.onTextChanged=new c.Signal),this.onTextChanged.emit(this),this.fitToMaxSize()},e.prototype.setStyle=function(t){this._internalAssetData.style=t,this.fitToMaxSize()},e.prototype.attachTo=function(t){this.detatch(),t.subscribe(this,this.setText.bind(this)),this._attachedObservable=t,this.fitToMaxSize()},e.prototype.detatch=function(){void 0!==this._attachedObservable&&(this._attachedObservable.unsubscribe(this),this._attachedObservable=void 0)},e.prototype.fitToMaxSize=function(){if(this._maxSize.x>0||this._maxSize.y>0){var t=u.TextMetrics.measureText(this._internalAssetData.text,this._internalAssetData.style);this._maxSize.x>0&&t.width>this._maxSize.x?this.transform.scale.x=this._maxSize.x/t.width:this.transform.scale.x=1,this._maxSize.y>0&&t.height>this._maxSize.y?this.transform.scale.y=this._maxSize.y/t.height:this.transform.scale.y=1}},e.currencyFormatter=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",maximumFractionDigits:2}),e}(a.DisplayComponent);e.TextComponent=p},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Observable=void 0;var o=n(0),i=function(){function t(t){this._onValueChanged=new o.Signal,this.isNumeric="number"==typeof t,void 0!==t&&this.setValue(t)}return t.prototype.getValue=function(){return this._value},t.prototype.setValue=function(t){this._value=t,this._onValueChanged.emit(this._value)},t.prototype.adjust=function(t){if(!this.isNumeric)throw new Error("Tried to add to a non-numeric observable.");this.setValue(Number(this._value)+t)},t.prototype.subscribe=function(t,e){this._onValueChanged.subscribe(t,e),e(this._value)},t.prototype.unsubscribe=function(t){this._onValueChanged.unsubscribe(t)},t}();e.Observable=i},function(t,e,n){"use strict";var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.SpriteComponent=void 0;var r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e}(n(11).DisplayComponent);e.SpriteComponent=r},function(t,e){t.exports=PIXI},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AssetLoader=void 0;var o=n(18),i=n(0),r=function(){function t(){}return t.loadAssets=function(e){t._assetMap=e;for(var n=0,o=Object.keys(e);n<o.length;n++){var i=o[n];PIXI.Loader.shared.add(t.getFileName(i),i)}PIXI.Loader.shared.load(t.onAssetsLoaded)},t.getAsset=function(e){var n=this._assetStore[t.getFileName(e)];return n instanceof PIXI.Sprite&&(n=PIXI.Sprite.from(n.texture)),n},t.onAssetsLoaded=function(e,n){for(var i=0,r=Object.keys(n);i<r.length;i++){var a=n[r[i]],s=t.getFileName(a.url);switch(t._assetMap[a.url]){case o.AssetType.SPRITE:t._assetStore[s]=new PIXI.Sprite(a.texture)}}t.onAssetGroupLoaded.emit()},t.getFileName=function(t){return t.slice(t.lastIndexOf("/")+1)},t._assetStore={},t.onAssetGroupLoaded=new i.Signal,t}();e.AssetLoader=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Renderable=void 0;var o=n(21),i=function(){function t(t){this._objectData=t,this.container=new PIXI.Container,this.transform=new o.Transform,this.transform.position.onComponentChanged.subscribe(this,this.onPositionChanged.bind(this)),this.transform.scale.onComponentChanged.subscribe(this,this.onScaleChanged.bind(this)),this.transform.rotation.onComponentChanged.subscribe(this,this.onRotationChanged.bind(this))}return t.prototype.load=function(){void 0!==this._objectData.transform&&this.transform.configure(this._objectData.transform)},t.prototype.destroy=function(){this.container.destroy(),this.transform.destroy()},t.prototype.onPositionChanged=function(){this.container.transform.position.x=this.transform.position.x,this.container.transform.position.y=this.transform.position.y},t.prototype.onScaleChanged=function(){this.container.transform.scale.x=this.transform.scale.x,this.container.transform.scale.y=this.transform.scale.y},t.prototype.onRotationChanged=function(){this.container.transform.rotation=this.transform.rotation.z},t}();e.Renderable=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Vector3=void 0;var o=n(0),i=function(){function t(t,e,n){void 0===t&&(t=0),void 0===e&&(e=t),void 0===n&&(n=0),this._x=t,this._y=e,this._z=n,this.onComponentChanged=new o.Signal}return t.prototype.destroy=function(){this.onComponentChanged.destroy()},t.zero=function(){return new t(0,0,0)},t.one=function(){return new t(1,1,1)},Object.defineProperty(t.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this.onComponentChanged.emit()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this.onComponentChanged.emit()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"z",{get:function(){return this._z},set:function(t){this._z=t,this.onComponentChanged.emit()},enumerable:!1,configurable:!0}),t.prototype.set=function(t,e,n){return void 0===e&&(e=t),this._x=t,this._y=e,void 0!==n&&(this._z=n),this.onComponentChanged.emit(),this},t.prototype.configure=function(t){return void 0!==t.x&&(this._x=t.x),void 0!==t.y&&(this._y=t.y),void 0!==t.z&&(this._z=t.z),this.onComponentChanged.emit(),this},t}();e.Vector3=i},function(t,e,n){"use strict";var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.DisplayComponent=void 0;var r=n(9),a=n(8),s=function(t){function e(e){var n=t.call(this,e)||this;return n.name=e.name,n}return i(e,t),e.prototype.destroy=function(){t.prototype.destroy.call(this),delete this._internalAssetData},e.prototype.load=function(){t.prototype.load.call(this),void 0!==this._objectData.assetName&&(this._internalAssetData=a.AssetLoader.getAsset(this._objectData.assetName),this.container.addChild(this._internalAssetData))},Object.defineProperty(e.prototype,"mask",{get:function(){return this._internalAssetData.mask},set:function(t){null==t?this._internalAssetData.mask instanceof PIXI.Container&&this.container.removeChild(this._internalAssetData.mask):t instanceof PIXI.Container&&this.container.addChild(t),this._internalAssetData.mask=t},enumerable:!1,configurable:!0}),e.prototype.setAssetName=function(t){this.container.removeChild(this._internalAssetData),this._internalAssetData=a.AssetLoader.getAsset(t),this.container.addChild(this._internalAssetData)},e}(r.Renderable);e.DisplayComponent=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GameEvent=void 0;var o=n(0),i=function(){function t(){}return t.ON_CYCLE_COMPLETE=new o.Signal,t.ON_PURCHASE_MANAGER=new o.Signal,t}();e.GameEvent=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.InteractionType=void 0,function(t){t.MOUSE_OVER="mouseover",t.MOUSE_OUT="mouseout",t.MOUSE_DOWN="mousedown",t.MOUSE_UP="mouseup",t.MOUSE_CLICK="click"}(e.InteractionType||(e.InteractionType={}))},function(t,e,n){"use strict";var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.Button=void 0;var r=n(1),a=n(4),s=n(6),c=n(0),u=n(13),l=function(t){function e(e){var n=t.call(this,e)||this;n._isEnabled=!0,n.onClick=new c.Signal,n.onDown=new c.Signal,n.onUp=new c.Signal,n.onOver=new c.Signal,n.onOut=new c.Signal,n.container.interactive=!0,n.container.addListener(u.InteractionType.MOUSE_CLICK,n.emitInteractionEvent.bind(n,n.onClick)),n.container.addListener(u.InteractionType.MOUSE_DOWN,n.emitInteractionEvent.bind(n,n.onDown)),n.container.addListener(u.InteractionType.MOUSE_UP,n.emitInteractionEvent.bind(n,n.onUp)),n.container.addListener(u.InteractionType.MOUSE_OVER,n.emitInteractionEvent.bind(n,n.onOver)),n.container.addListener(u.InteractionType.MOUSE_OUT,n.emitInteractionEvent.bind(n,n.onOut)),n.addDisplayComponent(new s.SpriteComponent(n._objectData.background));for(var o=0;o<n._objectData.labels.length;++o)n.addDisplayComponent(new a.TextComponent(n._objectData.labels[o]));return n}return i(e,t),Object.defineProperty(e.prototype,"isEnabled",{get:function(){return this._isEnabled},set:function(t){if(this._isEnabled=t,t)this.container.filters=[];else{var e=new PIXI.filters.ColorMatrixFilter;e.desaturate(),this.container.filters=[e]}},enumerable:!1,configurable:!0}),e.prototype.emitInteractionEvent=function(t){this._isEnabled&&t.emit(this)},e}(r.Actor);e.Button=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n(7);var o=n(2),i=n(3);o.Engine.start(i.AdVentureCapitalist)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EngineState=void 0,function(t){t[t.IDLE=0]="IDLE",t[t.STARTUP=1]="STARTUP",t[t.LOADING=2]="LOADING",t[t.RUNNING=3]="RUNNING"}(e.EngineState||(e.EngineState={}))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PIXIRenderer=void 0;var o=n(2),i=function(){function t(t,e){void 0===e&&(e={}),this.isActive=!0,this._pixiApp=new PIXI.Application(e),this._pixiRenderer=PIXI.autoDetectRenderer(),this._pixiApp.renderer.autoDensity=!0,this._pixiApp.renderer.resize(window.innerWidth,window.innerHeight),o.Engine.displayContainer.appendChild(this._pixiApp.view),this._pixiApp.resizeTo=o.Engine.displayContainer,this.container=new PIXI.Container,this._pixiApp.stage.addChild(this.container),this.levels=[];for(var n=0,i=t;n<i.length;n++){var r=i[n];this.addLevel(r)}}return t.prototype.update=function(t){for(var e=0,n=this.levels;e<n.length;e++){var o=n[e];o.root.isActive&&o.root.update(t)}this.draw()},t.prototype.addLevel=function(t){this.levels.push(t),this.container.addChild(t.root.container)},t.prototype.removeLevel=function(t){var e=this.levels.indexOf(t);return!(e>=0)&&(this.levels.splice(e,1),this.container.removeChild(t.root.container),!0)},t.prototype.draw=function(){this._pixiRenderer.render(this.container)},t}();e.PIXIRenderer=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AssetType=void 0,function(t){t.SPRITE="sprite"}(e.AssetType||(e.AssetType={}))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Game=void 0;var o=function(t){this._gameData=t,this.isActive=!0};e.Game=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Level=void 0;var o=n(1),i=n(2),r=function(t,e){void 0===e&&(e=!1),this.name=t,this.root=new o.Actor({name:this.name+"Root"}),e&&i.Engine.renderer.addLevel(this)};e.Level=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Transform=void 0;var o=n(10),i=function(){function t(t,e,n){void 0===t&&(t=o.Vector3.zero()),void 0===e&&(e=o.Vector3.one()),void 0===n&&(n=o.Vector3.zero()),this.position=t,this.scale=e,this.rotation=n}return t.prototype.destroy=function(){this.position.destroy(),this.scale.destroy(),this.rotation.destroy()},t.prototype.configure=function(t){return void 0!==t.position&&this.position.configure(t.position),void 0!==t.scale&&this.scale.configure(t.scale),void 0!==t.rotation&&this.rotation.configure(t.rotation),this},t}();e.Transform=i},function(t,e,n){"use strict";var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__assign||function(){return(r=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.VentureBusiness=void 0;var a,s=n(1),c=n(4),u=n(6),l=n(5),p=n(23),d=n(3),h=n(26);!function(t){t.ICON="icon",t.TIMER_AREA="timerArea",t.TIMER="timerText",t.AMOUNT_OWNED="amountOwnedText",t.PROGRESS_BAR="progressBar",t.BUY_BUTTON="buyButton"}(a||(a={}));var f=function(t){function e(e){var n,o=t.call(this,e)||this;o.profitMultipler=1,o.amountOwned=new l.Observable(null!==(n=o._objectData.initialAmountOwned)&&void 0!==n?n:0),o.timeInCycle=new l.Observable(0),o.baseCost=o._objectData.baseCost,o.baseProfit=o._objectData.baseProfit,o.baseCycleDuration=o._objectData.baseCycleDuration,o.managerCost=o._objectData.managerCost;for(var i=0;i<e.backSprites.length;++i)o.addDisplayComponent(new u.SpriteComponent(e.backSprites[i]));var s=new u.SpriteComponent({name:a.ICON,assetName:o._objectData.icon});return s.transform.scale.set(.75),o.addDisplayComponent(s),o.addDisplayComponent(new c.TextComponent({name:a.AMOUNT_OWNED,text:o.amountOwned})),o.addDisplayComponent(new c.TextComponent({name:a.TIMER,text:"",style:{fontFamily:"Arial",fill:16777215}})),o.addChild(new h.BusinessBuyButton(r(r({},o._objectData.buyButton),{name:a.BUY_BUTTON}))),o.addControllerComponent(new p.BusinessController(o.name+"Controller",o)),o}return i(e,t),e.prototype.load=function(){t.prototype.load.call(this),this.amountOwnedTextComponent.transform.position.x=this.iconComponent.container.width/2-this.amountOwnedTextComponent.container.width/2,this.amountOwnedTextComponent.transform.position.y=this.iconComponent.container.height+10,this.timerTextComponent.transform.position.x=this.progressBar.transform.position.x+this.progressBar.container.width/2-this.timerTextComponent.container.width/2,this.timerTextComponent.transform.position.y=this.progressBar.transform.position.y+this.progressBar.container.height/2-this.timerTextComponent.container.height/2;var e=(new PIXI.Graphics).beginFill().drawRect(0,0,this.progressBar.container.width,this.progressBar.container.height);e.scale.set(0,1),this.progressBar.mask=e},Object.defineProperty(e.prototype,"iconComponent",{get:function(){return this.displayComponents[a.ICON]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"amountOwnedTextComponent",{get:function(){return this.displayComponents[a.AMOUNT_OWNED]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"timerTextComponent",{get:function(){return this.displayComponents[a.TIMER]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"buyButton",{get:function(){return this.children[a.BUY_BUTTON]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"progressBar",{get:function(){return this.displayComponents[a.PROGRESS_BAR]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"profit",{get:function(){return this.baseProfit*this.amountOwned.getValue()*this.profitMultipler*d.AdVentureCapitalist.getInstance().bank.globalProfitMultiplier.getValue()},enumerable:!1,configurable:!0}),e.prototype.getNextNextNthUnitsCost=function(t){void 0===t&&(t=d.AdVentureCapitalist.getInstance().bank.purchaseMode.getValue());for(var e=0,n=0;n<t;++n)if(0!==n||0!==this.amountOwned.getValue()&&this.amountOwned.getValue()!==this._objectData.initialAmountOwned){var o=Math.max(1,this.amountOwned.getValue()-1+n);e+=this.baseCost*Math.pow(1.07,o)}else e+=this.baseCost;return e},e}(s.Actor);e.VentureBusiness=f},function(t,e,n){"use strict";var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.BusinessController=void 0;var r=n(24),a=n(25),s=n(12),c=n(13),u=n(3),l=function(t){function e(e,n){var o=t.call(this,e,n)||this;return o.hasManager=!1,o.isActive=!1,o._managerButton=u.AdVentureCapitalist.getInstance().bank.managerButtons[n.name],n.timerTextComponent.setText(a.formatTime(o.actor.baseCycleDuration)),n.iconComponent.container.interactive=!0,n.iconComponent.container.addListener(c.InteractionType.MOUSE_CLICK,o.onBusinessClicked.bind(o)),n.progressBar.container.interactive=!0,n.progressBar.container.addListener(c.InteractionType.MOUSE_CLICK,o.onBusinessClicked.bind(o)),n.buyButton.amountLabel.attachTo(u.AdVentureCapitalist.getInstance().bank.purchaseMode),n.buyButton.onClick.subscribe(o,o.onBusinessBuy.bind(o)),o._managerButton.onClick.subscribe(o,o.onManagerBuy.bind(o)),u.AdVentureCapitalist.getInstance().bank.purchaseMode.subscribe(o,o.updateBuyButtonPriceLabel.bind(o)),u.AdVentureCapitalist.getInstance().bank.balance.subscribe(o,o.updateBuyButtonEnabledStates.bind(o)),o}return i(e,t),e.prototype.update=function(t){void 0===this._progressBarMask&&(this._progressBarMask=this.actor.progressBar.mask),this.actor.timeInCycle.setValue(this.actor.timeInCycle.getValue()+t),this.actor.timerTextComponent.setText(a.formatTime(this.actor.baseCycleDuration-this.actor.timeInCycle.getValue()));var e=this.actor.timeInCycle.getValue()/this.actor.baseCycleDuration;this._progressBarMask.scale.x=e,this.actor.timeInCycle.getValue()<this.actor.baseCycleDuration||(s.GameEvent.ON_CYCLE_COMPLETE.emit(this.actor),this.actor.timerTextComponent.setText(a.formatTime(this.actor.baseCycleDuration)),this.actor.timeInCycle.setValue(0),this._progressBarMask.scale.x=0,this.hasManager||(this.isActive=!1))},e.prototype.onBusinessClicked=function(){this.actor.amountOwned.getValue()>0&&(this.isActive=!0)},e.prototype.onBusinessBuy=function(){var t=u.AdVentureCapitalist.getInstance().bank.purchaseMode.getValue(),e=this.actor.getNextNextNthUnitsCost(),n=u.AdVentureCapitalist.getInstance().bank.balance;this.actor.amountOwned.adjust(t),n.adjust(-e),this.updateBuyButtonPriceLabel(t),this.updateBuyButtonEnabledStates()},e.prototype.onManagerBuy=function(){this.hasManager=!0,this._managerButton.isEnabled=!1,this._managerButton.container.alpha=0,u.AdVentureCapitalist.getInstance().bank.balance.adjust(-this.actor.managerCost),this.isActive=!0},e.prototype.updateBuyButtonPriceLabel=function(t){this.actor.buyButton.priceLabel.setText(String(this.actor.getNextNextNthUnitsCost(t)))},e.prototype.updateBuyButtonEnabledStates=function(){var t=u.AdVentureCapitalist.getInstance().bank.balance.getValue();this.actor.buyButton.isEnabled=this.actor.getNextNextNthUnitsCost()<=t,this._managerButton.isEnabled=!this.hasManager&&this.actor.managerCost<=t},e}(r.ControllerComponent);e.BusinessController=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ControllerComponent=void 0;var o=function(t,e){this.name=t,this.actor=e,this.isActive=!0};e.ControllerComponent=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.formatTime=void 0,e.formatTime=function(t){var e=Math.max(Math.floor(t/3600),0),n=Math.max(Math.floor(t%3600/60),0),o=Math.max(Math.floor(t%60),0),i=""+(e<10?"0"+e:e);return i+=":"+(n<10?"0"+n:n),i+=":"+(o<10?"0"+o:o)}},function(t,e,n){"use strict";var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.BusinessBuyButton=void 0;var r,a=n(14);!function(t){t.PRICE="priceLabel",t.AMOUNT="amountLabel"}(r||(r={}));var s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),Object.defineProperty(e.prototype,"priceLabel",{get:function(){return this.displayComponents[r.PRICE]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"amountLabel",{get:function(){return this.displayComponents[r.AMOUNT]},enumerable:!1,configurable:!0}),e}(a.Button);e.BusinessBuyButton=s},function(t,e,n){"use strict";var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__assign||function(){return(r=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.VentureBank=e.PurchaseMode=void 0;var a,s=n(1),c=n(5),u=n(4),l=n(12),p=n(14),d=n(6);!function(t){t[t.ONE=1]="ONE",t[t.TEN=10]="TEN",t[t.HUNDRED=100]="HUNDRED",t[t.MAX=-1]="MAX"}(a=e.PurchaseMode||(e.PurchaseMode={}));var h=function(t){function e(e){var n=t.call(this,e)||this;n.purchaseMode=new c.Observable(a.ONE),n.globalProfitMultiplier=new c.Observable(1),n.balance=new c.Observable(1e3),n.managerButtons={};var o=new u.TextComponent({name:"balanceText",text:n.balance,format:u.TextFormatMode.CURRENCY});return o.setStyle(new PIXI.TextStyle({fill:16777215,fontSize:"72px",stroke:8947848,strokeThickness:7})),o.transform.position.set(25,0),n.addDisplayComponent(o),n.balance.adjust(0),l.GameEvent.ON_CYCLE_COMPLETE.subscribe(n,(function(t){n.balance.adjust(t.profit)})),n.createManagerButtons(),n}return i(e,t),e.prototype.createManagerButtons=function(){for(var t,e=85,n=0;n<this._objectData.businesses.length;++n){var o=this._objectData.businesses[n],i=r(r({},this._objectData.baseManagerButtonData),{name:o.name,labels:null!==(t=this._objectData.baseManagerButtonData.labels)&&void 0!==t?t:[],transform:{position:{x:0,y:e},scale:{x:.55,y:.55}}}),a=new p.Button(i),s=new d.SpriteComponent({name:o.name+"ManagerIcon",assetName:o.icon});a.addDisplayComponent(s),a.addDisplayComponent(new u.TextComponent({name:o.name+"ManagerButton",text:"Buy "+o.name+" Manager",style:{fill:16777215},transform:{position:{x:200,y:10}}})),a.addDisplayComponent(new u.TextComponent({name:o.name+"ManagerPrice",format:u.TextFormatMode.CURRENCY,text:o.managerCost,style:{fill:16777215,fontSize:"24pt"},transform:{position:{x:200,y:70}}})),this.managerButtons[o.name]=a,this.addChild(a),e+=85}},e}(s.Actor);e.VentureBank=h}]);